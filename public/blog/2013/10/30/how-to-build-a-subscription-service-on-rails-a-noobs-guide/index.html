
<!DOCTYPE HTML>
<html itemscope itemtype="http://schema.org/Article">
<head>
	<meta charset="utf-8">
	<title>How to Build a Subscription Service on Rails: A Noob's Guide - @jhooks</title>
	<meta name="author" content="Joel Hooks">

	
	<meta name="description" content="There are few things as nerve-wracking as pushing your first subscription
website into production. Am I covering all the bases? Will everything &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Joel Hooks" type="application/atom+xml">
	<link rel="canonical" href="">
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">



	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>


	<script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<meta property="og:description" content="the one where Joel discusses his trials and tribulations as a developer of fine software." />
<meta property="og:image" content="/images/erase_fear.jpg " />
<meta property="og:title" value="How to Build a Subscription Service on Rails: A Noob's Guide - Joel Hooks" />
<meta property="og:url" value="http://joelhooks.com/blog/2013/10/30/how-to-build-a-subscription-service-on-rails-a-noobs-guide/" />                    
<meta property="og:type" content="website" />                                    
 

<script type="text/javascript" src="//use.typekit.net/wbq6rdy.js"></script>
<script type="text/javascript">try {
    Typekit.load();
} catch (e) {
}</script>

<!-- Start Visual Website Optimizer Asynchronous Code -->
<script type='text/javascript'>
var _vwo_code=(function(){
var account_id=48528,
settings_tolerance=2000,
library_tolerance=2500,
use_existing_jquery=false,
// DO NOT EDIT BELOW THIS LINE
f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
</script>
<!-- End Visual Website Optimizer Asynchronous Code -->

<script type="text/javascript">
    if(typeof(_vis_opt_top_initialize) == "function") {
    // Code for Custom Goal: Goal #4
     _vis_opt_goal_conversion(200);
    // uncomment the following line to introduce a half second pause to ensure goal always registers with the server
    _vis_opt_pause(500);
    }
</script>




</head>


<body>
	<div class="topbar">
		<div class="inner">
			<div class="form">				
				<form name="header_signup" action="http://joelhooks.us6.list-manage.com/subscribe/post?u=cab7a76220&amp;id=e3b711e732" method="post">
					<div class="text"><strong>Weekly AngularJS Content Sent Right to Your Inbox:</strong></div>
					<div class="button-container">
			        <input class="input" type="email" name="EMAIL" placeholder="hey@you.com"> 
			        
			        <a class="button"  onclick="if(typeof(_vis_opt_top_initialize) =='function'){ _vis_opt_goal_conversion(200); _vis_opt_pause(500); } document.header_signup.submit();" href="#">Keep me Updated!</a>
			        </div>
			        <div class="text">(1~2 emails a week. No spam.)</div>
		      	</form>	    
			</div>

		</div>

	</div>
	<header id="header" class="inner">
<a href="/"><div class="myface">

</div></a>


<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/jhooks" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/joelhooks" title="GitHub">GitHub</a>
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>

</nav>

</header>
	<div id="content" class="inner"><article class="post">

	<h1 itemprop="name" class="title article-title">How to Build a Subscription Service on Rails: A Noob's Guide</h1>
	<div class="date">








  


<time datetime="2013-10-30T11:19:00-05:00" pubdate data-updated="true">October 2013</time></div>

	<div class="entry-content">
		
			<div class="article-image">
			<img itemprop="image" src="//d7jttttzl6muv.cloudfront.net/images/erase_fear.jpg" alt="The right tools, documentation, and learning materials help kill fear">
			</div>
		
		<p>There are few things as nerve-wracking as pushing your first subscription
website into production. Am I covering all the bases? Will everything break and
leave me in a pit of customer support sadness? How do I even take payments? Are
they just going to laugh at me?</p>

<h3>Some Background</h3>

<p>My friend John makes <a href="http://egghead.io">awesome AngularJS training videos</a>. They are short, topical, and
presented clearly. He loves making training videos, but has very little interest
in building out a website and marketing the content. &ldquo;Selling things on the
internet&rdquo; can be a chore. If you&rsquo;re just selling one off digital things, it is
fairly straight forward, but if you are looking to build out a website, allow
users to register, and charge them on a recurring basis it can be anything but.</p>

<p>As it happens, I&rsquo;m very interested in these problem. For the last couple of
years I&rsquo;ve been <a href="http://www.joelhooks.com/blog/2013/06/07/what-i-learned-from-brennan-dunns-consultancy-masterclass-w-slash-sketchnotes/">taking
classes</a>
and <a href="http://www.joelhooks.com/blog/2013/06/06/my-sketchnotes-and-thoughts-from-baconbizconf-2013/">going to
conferences</a>
that boil down to selling things on the internet. Recurring revenue is alluring.
My gurus are <strong>all about</strong> finding pain and providing immense value to people in
exchange for money.</p>

<p>Wonder Twin powers; activate!</p>

<h3>Digging in: The Stack</h3>

<p>We have content, traffic, and a solid reputation. What&rsquo;s the next step?</p>

<p>To actually build something, of course. <a href="http://www.joelhooks.com/blog/2013/09/15/why-i-built-an-angularjs-training-site-on-rails/">Rails was the clear
choice</a>
when it came time to decide what framework to use. It is mature, easy (enough)
to use, and has a metric shit-ton of resources for building this type of thing.</p>

<p>It is also astonishingly easy to deploy Rails apps to Heroku. This has been a
huge win. Using the free Heroku tier has allowed me to have a production and
staging environment a few keystrokes away.</p>

<h3>ZOMG There is so much to learn!</h3>

<p>I&rsquo;ve been developing software professionally for a few years. My roles are
primarily on the UI side of things, but I&rsquo;ve built a few full-stack solutions in
the past with Django. Over the years I&rsquo;ve always <em>wanted</em> to learn Rails, I just
never had anything real to build. Tutorials and books can be boring, especially
with no context of something &ldquo;real&rdquo; that you actually care about to build. That
said, there were a few excellent resources that helped me on the way:</p>

<p><a href="http://ruby.railstutorial.org/">Michael Hartl&rsquo;s Rub on Rails Tutorial</a>: Outside
of basic Ruby syntax, this is where you want to start. The web version is free,
and he guides you through building a &ldquo;real&rdquo; app with Rails in a clear, easy to
understand manner.</p>

<p><a href="http://railsapps.github.io/">Daniel Kehoe&rsquo;s RailsApp Project</a>: This was a huge
boost for me. It covered all the bases. I wanted to build an app with Rails.
Check. I wanted to use Twitter Boostrap with Rails. Check. I wanted to have
authentication and authorization in the app. Check. I wanted to integrate
recurring subscription payments. Check.</p>

<p><a href="http://www.petekeen.net/mastering-modern-payments">Peter Keen&rsquo;s Mastering Modern
Payments</a>: If you are going
to sell stuff via a Rails app, <strong>buy this book today</strong>. It saved me <strong>so much
time</strong> and instilled a confidence that I might never have had without it.
RailsApp is pretty good, but for me it started to break down when I wanted to
add payment. I needed deeper understanding and control, and Pete&rsquo;s book
delivered the knowledge I needed in a concise 120 page guide. I&rsquo;d recommend
getting the verion with the code, because it was a huge help to me.</p>

<p><a href="http://gilesbowkett.blogspot.com/2013/10/new-ebook-software-as-disservice-fixing.html">Giles Bowkett&rsquo;s Software as a
Disservice</a>
is a direct critique of RailsApp. It is harsh, but constructive. It addresses
code smells that I had noticed, enforced some of what I learned in Pete&rsquo;s book,
and lays out some solid practices that a Rails noob like me won&rsquo;t learn in 1000
searches that result in a Stack Overflow asnwer. It&rsquo;s an opinionated style and
practices guide. <em>note: RailsApp has its flaws, and it was extremely useful to
me. Daniel is passionate and has put out a lot of excellent material, but
charging people real money for a product or service is terrifying. I <strong>needed</strong>
this critique to plug some serious holes in the implementation. It is important
to recognize that Giles is critiquing the <strong>code</strong> and not the developer that
wrote it.</em></p>

<p>These four sources were keys to the successful launch of egghead.io&rsquo;s Pro
subscription service. Along with countless posts, Stack Overflow answers, and
documentation written by the Ruby/Rails community. It is amazing. Now is a
<strong>very</strong> good time to be a nerd.</p>

<h3>Taking Payments: *scared face*</h3>

<p>It really is terrifying. Maybe it isn&rsquo;t as scary if you&rsquo;ve done it before and
know what you are doing. I didn&rsquo;t qualify.</p>

<p>Luckily we live in a fantastic age of modern convenience.</p>

<p><strong>Stripe</strong>.</p>

<p>What an amazing service.</p>

<ul>
<li>No complicated merchant accounts or setup</li>
<li>By developers, for developers</li>
<li>Wonderful API</li>
<li>Excellent resources for testing</li>
<li>Solid documentation</li>
<li>Easy integration</li>
</ul>


<p>They handle a huge amount of the drudgery invloved with taking payments from
people on the internet. They remove the horrors of PCI compliance by providing
an implementation that allows you to take credit cards without ever actually
having the actual credit card numbers touch your system. They travel over
secure-socket-layer directly to Stripe, who responds with a token that allows
you to initiate an authorized charge. It is beautiful. Once you&rsquo;ve authorized a
subscription, Stripe manages the recurring billing for you.</p>

<p>To help with the subscriptions, I found the <a href="https://github.com/andrewculver/koudoku">Koudoku
gem</a> to be a great resource. While I
had to fork it and manipulate it to some extent for my specific needs, it does a
lot of the heavy lifting. I&rsquo;m on the fence about using a gem to handle all of
this. On one hand, it is <strong>very</strong> easy. On the other, having your subscription
implementation tucked away in a &ldquo;black box&rdquo; can bite you when the shit hits the
fan. Give and take.</p>

<h3>What would I do differently?</h3>

<p><strong>Testing</strong></p>

<p><strong>Testing</strong></p>

<p><strong>Testing</strong></p>

<p>It is tough, as a noob, to get in and write proper tests. <strong>All</strong> of the
resources I listed above discuss testing. I skipped it. You know what is
<strong>really hard</strong>? Going back through a non-trivial system and writing a solid
test suite.</p>

<p>This can&rsquo;t be said enough. Tests should <strong>guide design of code</strong> and when they
are tacked on later, they lose a big chunk of value. This isn&rsquo;t to say they
don&rsquo;t still provide immense value, but &ldquo;test later&rdquo; often means &ldquo;test never&rdquo; and
this isn&rsquo;t a good situation to be in.</p>

<p>I&rsquo;m working on retrofitting tests, but it is a chore. Test early, test often.</p>

<h3>Summary</h3>

<p>Building a subscription service is scary. Luckily the internet is stuffed full
of open source projects, examples, and helpful people sharing knowledge. Some of
it is free, but some of the best resources cost a few dollars. Worth every
penny.</p>

<p>Rails is a great framework for this sort of thing. I&rsquo;d recommend it highly, if
you are trying to build an application that requires recurring billing for your
users.</p>

<p><strong>Test early, test often</strong>. It&rsquo;s an additional thing to learn and understand if
you are just starting out, but it is worth the effort. If I could go back and do
anything differently, it would be to write solid tests along the way. Don&rsquo;t make
the same mistake with your apps!</p>

	</div>

	<div class="contact">Want to chat about this post? I'd love to hear from you. <br>You can find me on twitter <a href="http://twitter.com/jhooks">@jhooks</a> or via email <a href="mailto:joelhooks@gmail.com?Subject=Hello%20,%20email%20from%20joelhooks.com">joelhooks@gmail.com</a></div>

	
	<div class="cta">
		<div class="signup">
		    <p class="message">
		      <a id="signup-for-updates"></a>
              Get weekly AngularJS content and curated links. Keep up to date with the latest, <strong>sign up below</strong>:
		    </p>

		    <div>
		      <form name="signup" action="http://joelhooks.us6.list-manage.com/subscribe/post?u=cab7a76220&amp;id=e3b711e732" method="post">
		        <input class="input" type="email" name="EMAIL" placeholder="Email Address"> 
		        <div class="button_container"><a class="button" onclick="if(typeof(_vis_opt_top_initialize) =='function'){ _vis_opt_goal_conversion(200); _vis_opt_pause(500); } setTimeout(function(){document.signup.submit();},500);" href="#">Send Me Updates!</a></div>
		        <div class="arrow"></div>
		      </form>
		    </div>
		    <p class="small">I will <strong>never</strong> spam you. Unsubscribe at anytime.</p>

	    </div>
    </div>
    


</article>

</div>
	<footer id="footer" class="inner"><p>
you can learn more about me <a href="/about"> here.</a>
</p>
<p>
  ~ Copyright &copy; 2013 - Joel Hooks -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> ~
</p>


</footer>
	<script type="text/javascript" src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->

	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-246705-7']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);

		})();
		setTimeout(function() {
		   window.onscroll = function() {
		     window.onscroll = null; // Only track the event once
		     _gaq.push(['_trackEvent', 'scroll', 'read']);
		   }
		 }, 5000);
	</script>



    <script type="text/javascript" src="https://gumroad.com/js/gumroad.js"></script>

    <script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '51ddb932613f5d3030000126');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>


</script>
</body>
</html>
